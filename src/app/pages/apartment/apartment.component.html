<!-- Modern Apartment Rental Page -->
<div class="modern-apartment-page" [class.dark-mode]="isDarkMode">
  
  <!-- Logo -->
  <div class="logo-container">
    <img *ngIf="!isDarkMode" src="assets/Logo/HsDNoBackBlue.png" alt="HSD Logo" class="site-logo" loading="lazy" decoding="async">
    <img *ngIf="isDarkMode" src="assets/Logo/HsDNoBackWhite.png" alt="HSD Logo" class="site-logo" loading="lazy" decoding="async">
  </div>


  <!-- Controls Container -->
  <div class="controls-container">
    <!-- Language Toggle -->
    <button class="language-toggle" (click)="toggleLanguage()" [attr.aria-label]="languageAriaLabel">
      <span class="language-text">{{ languageButtonText }}</span>
    </button>
    
    <!-- Dark Mode Toggle -->
    <button class="dark-mode-toggle" (click)="toggleDarkMode()" [attr.aria-label]="getText(isDarkMode ? 'Switch to light mode' : 'Switch to dark mode', isDarkMode ? 'Mudar para modo claro' : 'Mudar para modo escuro')">
      <svg *ngIf="!isDarkMode" width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M21.752 15.002A9.718 9.718 0 0118 15.75c-5.385 0-9.75-4.365-9.75-9.75 0-1.33.266-2.597.748-3.752A9.753 9.753 0 003 11.25C3 16.635 7.365 21 12.75 21a9.753 9.753 0 009.002-5.998z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
      </svg>
      <svg *ngIf="isDarkMode" width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
        <circle cx="12" cy="12" r="4" stroke="currentColor" stroke-width="1.5"/>
        <path d="m12 2 0 2m0 16 0 2M4.93 4.93l1.41 1.41m11.32 11.32 1.41 1.41M2 12l2 0m16 0 2 0M4.93 19.07l1.41-1.41M17.66 6.34l1.41-1.41" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
      </svg>
    </button>
  </div>
  
  <!-- Hero Section with Overlay -->
  <section class="hero-section">
    <div class="hero-background"></div>
    <div class="hero-content">
      <h1 class="hero-title">{{ getText('Prelada Residence T1 Apartment', 'Prelada Residence Apartamento T1') }}</h1>
      <div class="hero-size">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
          <polyline points="9,22 9,12 15,12 15,22"></polyline>
        </svg>
        <span>72m² + {{ getText('Terrace', 'Terraço') }} + {{ getText('Garage', 'Garagem') }}</span>
      </div>
      <div class="hero-location">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"></path>
          <circle cx="12" cy="10" r="3"></circle>
        </svg>
        <span>Travessa da Prelada 626, Porto, Portugal</span>
      </div>
    </div>
  </section>

<!--    Quick Info Cards -->
<!--  <section class="info-cards-section">
    <div class="container">
      <div class="info-cards">
        <div class="info-card">
          <div class="card-icon">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
              <polyline points="9,22 9,12 15,12 15,22"></polyline>
            </svg>
          </div>
          <h3>Spacious Living</h3>
          <p>76m² + private terrace for outdoor relaxation</p>
        </div>
        <div class="info-card">
          <div class="card-icon">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <rect x="2" y="3" width="20" height="14" rx="2" ry="2"></rect>
              <line x1="8" y1="21" x2="16" y2="21"></line>
              <line x1="12" y1="17" x2="12" y2="21"></line>
            </svg>
          </div>
          <h3>Modern Comfort</h3>
          <p>Elevator access and private garage included</p>
        </div>
        <div class="info-card">
          <div class="card-icon">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"></path>
            </svg>
          </div>
          <h3>Prime Location</h3>
          <p>Perfect location in Porto with great accessibility</p>
        </div>
      </div>
    </div>
  </section> -->

  <!-- Image Gallery Section -->
  <section class="modern-gallery" *ngIf="images.length > 0">
    <div class="container">
      <div class="gallery-header">
        <h2>{{ getText('Apartment Gallery', 'Fotos do apartamento') }}</h2>
        <p>{{ getText('Explore every corner of your future home', 'Explora cada canto da tua futura casa') }}</p>
        <div class="gallery-counter">{{ images.length }} {{ getText('photos', 'fotos') }}</div>
      </div>
      <div class="gallery-grid">
        <div 
          *ngFor="let image of images; let i = index" 
          class="gallery-item"
          (click)="openGallery(image)"
          [style.animation-delay.ms]="i * 100"
          [attr.data-index]="i"
        >
          <div class="image-container">
            <img 
              [src]="image.thumbnail" 
              [alt]="image.alt"
              loading="lazy"
              class="thumbnail-image"
              [class.loaded]="imageLoaded[i]"
              (load)="onImageLoad(i)"
              onerror="this.src='data:image/svg+xml,%3Csvg xmlns=\'http://www.w3.org/2000/svg\' width=\'300\' height=\'200\' viewBox=\'0 0 300 200\'%3E%3Crect width=\'300\' height=\'200\' fill=\'%23f0f0f0\'/%3E%3Ctext x=\'150\' y=\'100\' text-anchor=\'middle\' dominant-baseline=\'middle\' fill=\'%23999\' font-family=\'Arial, sans-serif\' font-size=\'14\'%3EImage not available%3C/text%3E%3C/svg%3E'"
            >
            <img 
              [src]="shouldLoadFullImage[i] ? image.src : ''"
              [alt]="image.alt"
              class="full-image"
              [class.loaded]="fullImageLoaded[i]"
              (load)="onFullImageLoad(i)"
              *ngIf="shouldLoadFullImage[i]"
            >
          </div>
          <div class="gallery-overlay">
            <div class="overlay-content">
              <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <circle cx="11" cy="11" r="8"></circle>
                <path d="M21 21l-4.35-4.35"></path>
              </svg>
              <span>{{ getText('View Image', 'Ver Imagem') }}</span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Features & Details Section -->
  <section class="features-section">
    <div class="container">
      <div class="features-grid">
        <div class="features-content">
          <div class="section-badge">{{ getText('Property Details', 'Detalhes do Imóvel') }}</div>
          <h2>{{ getText('Everything you need to know', 'Tudo o que precisas de saber') }}</h2>
          <p class="section-description">{{ getText('This beautifully appointed T1 apartment spans 76m² plus a private terrace, offering modern living with all the essentials for comfortable city life.', 'Este apartamento T1 tem 76m² mais um terraço privado, oferecendo vida moderna com todos os essenciais para uma vida confortável na cidade.') }}</p>
          
          <div class="feature-items">
            <div class="feature-item">
              <div class="feature-icon">
                <span class="material-symbols-outlined">restaurant</span>
              </div>
              <div>
                <h4>{{ getText('Modern Kitchen', 'Cozinha Moderna') }}</h4>
                <p>{{ getText('Fully equipped with modern appliances', 'Totalmente equipada com eletrodomésticos modernos') }}</p>
              </div>
            </div>
            <div class="feature-item">
              <div class="feature-icon">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M2 4v16"></path>
                  <path d="M2 8h18a2 2 0 0 1 2 2v10"></path>
                  <path d="M2 17h20"></path>
                  <path d="M6 8v9"></path>
                </svg>
              </div>
              <div>
                <h4>{{ getText('Comfortable Bedroom', 'Quarto Confortável') }}</h4>
                <p>{{ getText('Spacious bedroom with built-in storage', 'Quarto espaçoso com roupeiros embutidos') }}</p>
              </div>
            </div>
            <div class="feature-item">
              <div class="feature-icon">
                <span class="material-symbols-outlined">deck</span>
              </div>
              <div>
                <h4>{{ getText('Private Terrace', 'Terraço Privado') }}</h4>
                <p>{{ getText('Your own outdoor space for relaxation', 'Espaço ao ar livre para relaxar') }}</p>
              </div>
            </div>
            <div class="feature-item">
              <div class="feature-icon">
                <span class="material-symbols-outlined">garage</span>
              </div>
              <div>
                <h4>{{ getText('Private Garage', 'Garagem Privada') }}</h4>
                <p>{{ getText('Secure parking space included', 'Estacionamento seguro incluído') }}</p>
              </div>
            </div>
            <div class="feature-item">
              <div class="feature-icon">
                <span class="material-symbols-outlined">subway</span>
              </div>
              <div>
                <h4>{{ getText('Subway Access', 'Acesso ao Metro') }}</h4>
                <p>{{ getText('Metro station just 5 minutes walk away', 'Estação de metro apenas a 5 minutos a pé') }}</p>
              </div>
            </div>
            <div class="feature-item">
              <div class="feature-icon">
                <span class="material-symbols-outlined">shopping_cart</span>
              </div>
              <div>
                <h4>{{ getText('Continente Nearby', 'Continente Perto') }}</h4>
                <p>{{ getText('Supermarket only 2 minutes away on foot', 'Supermercado apenas a 2 minutos a pé') }}</p>
              </div>
            </div>
            <div class="feature-item">
              <div class="feature-icon">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
                  <rect x="7" y="7" width="3" height="9"></rect>
                  <rect x="14" y="7" width="3" height="5"></rect>
                </svg>
              </div>
              <div>
                <h4>{{ getText('Custom Built-ins', 'Armários Personalizados') }}</h4>
                <p>{{ getText('Ample storage with custom-designed built-in solutions', 'Amplo armazenamento com soluções embutidas') }}</p>
              </div>
            </div>
            <div class="feature-item">
              <div class="feature-icon">
                <span class="material-symbols-outlined">tv</span>
              </div>
              <div>
                <h4>{{ getText('Big Living Room', 'Sala de Estar Ampla') }}</h4>
                <p>{{ getText('Spacious living area perfect for entertaining', 'Área de estar espaçosa perfeita para entreter') }}</p>
              </div>
            </div>
          </div>
        </div>

        <div class="contact-section">
          <div class="contact-card">
            <div class="contact-header">
              <div class="price-section">
                <div class="price">950€</div>
                <div class="price-period">{{ getText('per month', 'por mês') }}</div>
              </div>
              <h3>{{ getText('Interested?', 'Interessado?') }}</h3>
              <p>{{ getText('Contact to schedule a viewing', 'Contacta-me para agendar uma visita') }}</p>
            </div>
            <div class="contact-info">
              <div class="contact-item">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"></path>
                </svg>
                <span>938 097 868</span>
              </div>
              <div class="contact-item">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <rect x="2" y="2" width="20" height="20" rx="5" ry="5"></rect>
                  <path d="m16 11.37-2.08-2.09a1.5 1.5 0 0 0-2.11 0L9.73 11.37a1.5 1.5 0 0 0 0 2.11L11.82 15.56a1.5 1.5 0 0 0 2.11 0l2.07-2.08a1.5 1.5 0 0 0 0-2.11z"></path>
                  <circle cx="12" cy="12" r="3"></circle>
                </svg>
                <span>@hssduarte</span>
              </div>
              <div class="contact-buttons">
                <a href="tel:+351938097868" class="contact-btn">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"></path>
                  </svg>
                  {{ getText('Call Now', 'Ligar Agora') }}
                </a>
                <a href="https://instagram.com/hssduarte" target="_blank" class="contact-btn instagram-btn">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <rect x="2" y="2" width="20" height="20" rx="5" ry="5"></rect>
                    <path d="m16 11.37-2.08-2.09a1.5 1.5 0 0 0-2.11 0L9.73 11.37a1.5 1.5 0 0 0 0 2.11L11.82 15.56a1.5 1.5 0 0 0 2.11 0l2.07-2.08a1.5 1.5 0 0 0 0-2.11z"></path>
                    <circle cx="12" cy="12" r="3"></circle>
                  </svg>
                  Instagram
                </a>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Enhanced Lightbox Gallery -->
  <div class="modern-lightbox" *ngIf="showGallery && selectedImage" (click)="closeGallery()">
    <div class="lightbox-content" (click)="$event.stopPropagation()">
      <div class="lightbox-header">
        <button 
          class="lightbox-back" 
          (click)="onPreviousClick($event)" 
          [disabled]="currentImageIndex === 0"
          *ngIf="images.length > 1"
          [attr.aria-label]="getText('Previous image', 'Imagem anterior')"
        >
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="m15 18-6-6 6-6"/>
          </svg>
        </button>
        <div class="lightbox-title">{{ selectedImage.alt }}</div>
        <button class="lightbox-close" (click)="closeGallery()">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="18" y1="6" x2="6" y2="18"></line>
            <line x1="6" y1="6" x2="18" y2="18"></line>
          </svg>
        </button>
      </div>
      
      <div class="lightbox-image-container">
        <button 
          class="lightbox-nav lightbox-prev" 
          (click)="onPreviousClick($event)" 
          [disabled]="currentImageIndex === 0"
          *ngIf="images.length > 1"
        >
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <polyline points="15,18 9,12 15,6"></polyline>
          </svg>
        </button>
        
        <div class="lightbox-image-wrapper">
          <img [src]="selectedImage.src" [alt]="selectedImage.alt" class="lightbox-image" (load)="onLightboxImageLoad()">
          <div class="loading-spinner" *ngIf="lightboxImageLoading">Loading...</div>
        </div>
        
        <button 
          class="lightbox-nav lightbox-next" 
          (click)="onNextClick($event)" 
          [disabled]="currentImageIndex === images.length - 1"
          *ngIf="images.length > 1"
        >
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <polyline points="9,18 15,12 9,6"></polyline>
          </svg>
        </button>
      </div>
      
      <div class="lightbox-footer" *ngIf="images.length > 1">
        <div class="lightbox-counter">
          {{ currentImageIndex + 1 }} of {{ images.length }}
        </div>
      </div>
    </div>
  </div>
</div>
